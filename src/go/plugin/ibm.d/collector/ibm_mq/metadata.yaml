plugin_name: ibm.d.plugin
modules:
  - meta:
      module_name: ibm_mq
      monitored_instance:
        name: IBM MQ
        link: https://www.ibm.com/products/mq
        categories:
          - messaging
        icon_filename: "ibm_mq.svg"
    overview:
      data_collection:
        metrics_description: |
          Collects metrics for IBM MQ queues, channels, and queue managers.
        method_description: |
          Connects to IBM MQ using the Go client library and queries for various statistics.
    setup:
      prerequisites:
        list:
          - title: IBM MQ Client Libraries
            description: Ensure IBM MQ Client version 9.1+ is installed and `LD_LIBRARY_PATH` is configured.
      configuration:
        list:
          - title: Basic Configuration
            description: |
              Configure the `ibm_mq.conf` file with your IBM MQ connection details.
              Example:
              ```yaml
              jobs:
                - name: local
                  channel: 'DEV.APP.SVRCONN'
                  queue_manager: 'QM1'
                  host: 'localhost'
                  port: 1414
                  user: 'mq_user'
                  password: 'mq_password'
              ```
    metrics:
      # Queue Metrics
      - name: ibm_mq.queue.depth_current
        description: Current depth of the queue.
        unit: messages
        chart_type: gauge
      - name: ibm_mq.queue.depth_max
        description: Maximum depth of the queue.
        unit: messages
        chart_type: gauge
      - name: ibm_mq.queue.depth_percent
        description: Percentage of queue utilization.
        unit: percent
        chart_type: gauge
      - name: ibm_mq.queue.msg_deq_count
        description: Number of messages dequeued.
        unit: messages
        chart_type: incremental
      - name: ibm_mq.queue.msg_enq_count
        description: Number of messages enqueued.
        unit: messages
        chart_type: incremental
      - name: ibm_mq.queue.oldest_message_age
        description: Age of the oldest message in the queue.
        unit: seconds
        chart_type: gauge
      - name: ibm_mq.queue.open_input_count
        description: Number of open input connections to the queue.
        unit: connections
        chart_type: gauge
      - name: ibm_mq.queue.open_output_count
        description: Number of open output connections to the queue.
        unit: connections
        chart_type: gauge

      # Channel Metrics
      - name: ibm_mq.channel.batches
        description: Number of completed batches on the channel.
        unit: batches
        chart_type: gauge
      - name: ibm_mq.channel.buffers_rcvd
        description: Number of buffers received on the channel.
        unit: buffers
        chart_type: gauge
      - name: ibm_mq.channel.buffers_sent
        description: Number of buffers sent on the channel.
        unit: buffers
        chart_type: gauge
      - name: ibm_mq.channel.bytes_rcvd
        description: Number of bytes received on the channel.
        unit: bytes
        chart_type: gauge
      - name: ibm_mq.channel.bytes_sent
        description: Number of bytes sent on the channel.
        unit: bytes
        chart_type: gauge
      - name: ibm_mq.channel.current_msgs
        description: Number of in-doubt messages on the channel.
        unit: messages
        chart_type: gauge
      - name: ibm_mq.channel.msgs
        description: Number of messages sent or received on the channel.
        unit: messages
        chart_type: gauge

      # Queue Manager Metrics
      - name: ibm_mq.queue_manager.dist_lists
        description: Number of distribution lists.
        unit: lists
        chart_type: gauge
      - name: ibm_mq.queue_manager.max_msg_list
        description: Maximum message length.
        unit: bytes
        chart_type: gauge
