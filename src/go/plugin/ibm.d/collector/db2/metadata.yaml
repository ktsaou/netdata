plugin_name: ibm.d.plugin
modules:
  - meta:
      id: collector-ibm.d.plugin-db2
      plugin_name: ibm.d.plugin
      module_name: db2
      monitored_instance:
        name: IBM DB2
        link: "https://www.ibm.com/products/db2"
        icon_filename: "ibm.svg"
        categories:
          - data-collection.database-servers
      keywords:
        - db2
        - database
        - rdbms
        - ibm
      related_resources:
        integrations:
          list: []
      info_provided_to_referring_integrations:
        description: ""
      most_popular: false
    overview:
      data_collection:
        metrics_description: |
          This collector monitors IBM DB2 database performance metrics.

          **IMPORTANT**: This collector is part of the ibm.d.plugin which requires CGO and is not included in the default Netdata build.
          See the setup section for build instructions.

          **Supported DB2 Versions**:
          - **DB2 LUW 9.7+**: Full feature set with SYSIBMADM views
          - **DB2 LUW 10.0+**: Extended monitoring features
          - **DB2 LUW 11.0+**: Column store metrics support
          - **DB2 for z/OS**: Limited buffer pool detailed metrics
          - **DB2 for i (AS/400)**: Basic monitoring without SYSIBMADM views
          - **Db2 on Cloud**: Simplified metrics due to restricted schema (no POOL_COL_*, *_LBP_PAGES_FOUND, APPLICATION_NAME, UOW_COMP_STATUS, ROWS_MODIFIED, PAGESIZE, FREE_PAGES, TOTAL_LOG_USED/AVAILABLE)

          The collector automatically detects your DB2 edition and version, then enables only compatible features. Core metrics work on all versions, while advanced features require specific DB2 releases. Version information is added as labels to all charts for filtering and grouping capabilities.

          System-wide metrics include:
          - Database connections (total, active, executing, idle)
          - Locking activity (waits, timeouts, deadlocks, escalations)
          - Sorting activity and overflows
          - Row activity (reads and modifications)
          - Buffer pool hit ratio
          - Log space usage
          - Long-running queries (total, warning >5min, critical >15min)
          - Backup status and age tracking

          Per-instance metrics (when enabled) include:
          - Database status and applications
          - Individual buffer pool performance
          - Tablespace usage and sizes
          - Connection-level activity
          - Memory pool usage and high water marks
          - Table I/O statistics (scans, reads, DML activity)
        method_description: |
          The collector uses unixODBC with IBM DB2 ODBC drivers to connect to the database and queries
          system catalog tables in SYSIBMADM schema to gather performance metrics.

          **Key Benefits of ODBC Approach:**
          - No IBM DB2 client library licensing required
          - Works with both DB2 and AS/400 systems
          - Simplified deployment and configuration
          - Consistent behavior across all IBM database types

          For DB2 9.7+ LUW editions, the collector also uses MON_GET_* table functions for:
          - Memory pool monitoring (MON_GET_MEMORY_POOL)
          - Table I/O statistics (MON_GET_TABLE)
          - Connection wait time analysis (MON_GET_CONNECTION)

          The collector is designed for maximum resilience across different DB2 editions and versions:
          - Automatically detects DB2 edition (LUW, z/OS, i, Cloud) and version
          - Proactively disables features based on detected edition/version before attempting queries
          - Uses individual queries for each metric to maximize compatibility
          - Gracefully handles missing tables, views, columns, and functions without failures
          - Provides Cloud-specific simplified queries for Db2 on Cloud's restricted schema
          - Comprehensive logging of available and disabled features during startup
          - Logs version/edition compatibility issues only once to avoid log spam
          - Core metrics work on all DB2 editions and versions
          - Version and edition information added as labels to all charts for filtering and grouping
      supported_platforms:
        include: []
        exclude: []
      multi_instance: true
      additional_permissions:
        description: |
          The user account needs SELECT permission on SYSIBMADM system views.
      default_behavior:
        auto_detection:
          description: |
            The collector doesn't perform auto-detection of DB2 instances.
            You need to manually configure the connection string.
        limits:
          description: |
            By default, the collector limits the number of monitored instances to prevent
            excessive memory usage. These limits can be adjusted in configuration.
        performance_impact:
          description: |
            The performance impact is minimal. The collector uses efficient queries
            against system monitoring views and automatically disables unsupported features
            based on the detected DB2 edition and version.
    setup:
      prerequisites:
        list:
          - title: Build ibm.d.plugin with CGO Support
            description: |
              This collector is part of the ibm.d.plugin which requires CGO and is not included in the default build.
              See the AS/400 collector documentation for build instructions.

          - title: ODBC Driver Setup
            description: |
              This collector uses unixODBC exclusively for database connectivity, eliminating IBM DB2 client library licensing requirements.

              **Required Components:**
              1. **unixODBC driver manager**: `sudo apt-get install unixodbc` or `sudo yum install unixODBC`
              2. **IBM DB2 ODBC drivers**: Available from:
                 - IBM Data Server Driver Package (includes ODBC drivers)
                 - IBM i Access Client Solutions (for AS/400 connectivity)
                 - Distribution packages (e.g., `ibm-db2-odbc`)
              3. **Driver registration**: Verify with `odbcinst -q -d`

              **Benefits:**
              - ✅ **No IBM DB2 client library licensing required**
              - ✅ **Works with both DB2 and AS/400 systems**
              - ✅ **Simplified deployment and configuration**

          - title: Database User Permissions
            description: |
              The database user needs SELECT permissions on SYSIBMADM views:
              ```sql
              GRANT SELECT ON SYSIBMADM.APPLICATIONS TO username;
              GRANT SELECT ON SYSIBMADM.SNAPDB TO username;
              GRANT SELECT ON SYSIBMADM.SNAPBP TO username;
              GRANT SELECT ON SYSIBMADM.TBSP_UTILIZATION TO username;
              GRANT SELECT ON SYSIBMADM.LOG_UTILIZATION TO username;
              GRANT SELECT ON SYSIBMADM.ENV_INST_INFO TO username;

              -- For MON_GET_* functions (DB2 9.7+ LUW):
              GRANT EXECUTE ON FUNCTION SYSPROC.MON_GET_MEMORY_POOL TO username;
              GRANT EXECUTE ON FUNCTION SYSPROC.MON_GET_TABLE TO username;
              GRANT EXECUTE ON FUNCTION SYSPROC.MON_GET_CONNECTION TO username;
              ```
      configuration:
        file:
          name: ibm.d/db2.conf
        options:
          description: |
            The following options can be defined globally: update_every.
          folding:
            title: Config options
            enabled: true
          list:
            - name: update_every
              description: Data collection frequency.
              default_value: 5
              required: false
            - name: dsn
              description: ODBC connection string (alternative to component-based config).
              default_value: ""
              required: false
              detailed_description: |
                ODBC connection string format:
                `Driver={IBM DB2 ODBC DRIVER};Database=dbname;Hostname=host;Port=port;Protocol=TCPIP;Uid=username;Pwd=password`

                For SSL connections, add:
                `;Security=SSL;SSLServerCertificate=/path/to/certificate.crt`
            - name: hostname
              description: Database server hostname or IP address.
              default_value: ""
              required: false
              detailed_description: |
                Use with component-based configuration instead of DSN string.
                Required when not using DSN parameter.
            - name: port
              description: Database server port number.
              default_value: 0
              required: false
              detailed_description: |
                Common ports:
                - 50000: Default for DB2 LUW
                - 446: Default for DB2 for i (AS/400)
                - 5023: Common for DB2 z/OS
            - name: database
              description: Database name to connect to.
              default_value: ""
              required: false
              detailed_description: |
                The target database name. Required when using component-based configuration.
            - name: username
              description: Database username.
              default_value: ""
              required: false
              detailed_description: |
                Database user with SELECT permissions on SYSIBMADM views.
            - name: password
              description: Database password.
              default_value: ""
              required: false
              detailed_description: |
                Password for the database user.
            - name: use_ssl
              description: Enable SSL/TLS encryption.
              default_value: false
              required: false
            - name: ssl_server_cert_path
              description: Path to SSL server certificate file.
              default_value: ""
              required: false
            - name: odbc_driver
              description: ODBC driver name (auto-detected if not specified).
              default_value: ""
              required: false
              detailed_description: |
                ODBC driver name. Common values:
                - "IBM DB2 ODBC DRIVER" (for DB2 LUW)
                - "IBM i Access ODBC Driver" (for AS/400)
                Auto-detected based on available drivers if not specified.
            - name: timeout
              description: Query timeout in seconds.
              default_value: 2
              required: false
            - name: max_db_conns
              description: Maximum number of open database connections.
              default_value: 1
              required: false
            - name: max_db_life_time
              description: Maximum connection lifetime.
              default_value: 10m
              required: false
            - name: collect_database_metrics
              description: Enable collection of per-database metrics.
              default_value: true
              required: false
            - name: collect_bufferpool_metrics
              description: Enable collection of per-bufferpool metrics.
              default_value: true
              required: false
            - name: collect_tablespace_metrics
              description: Enable collection of per-tablespace metrics.
              default_value: true
              required: false
            - name: collect_connection_metrics
              description: Enable collection of per-connection metrics.
              default_value: true
              required: false
            - name: max_databases
              description: Maximum number of databases to monitor.
              default_value: 10
              required: false
            - name: max_bufferpools
              description: Maximum number of bufferpools to monitor.
              default_value: 20
              required: false
            - name: max_tablespaces
              description: Maximum number of tablespaces to monitor.
              default_value: 100
              required: false
            - name: max_connections
              description: Maximum number of connections to monitor individually.
              default_value: 200
              required: false
            - name: collect_lock_metrics
              description: Enable collection of lock metrics.
              default_value: true
              required: false
            - name: collect_table_metrics
              description: Enable collection of per-table metrics (size, activity).
              default_value: false
              required: false
            - name: collect_index_metrics
              description: Enable collection of per-index metrics (scans, usage).
              default_value: false
              required: false
            - name: max_tables
              description: Maximum number of tables to monitor.
              default_value: 50
              required: false
            - name: max_indexes
              description: Maximum number of indexes to monitor.
              default_value: 100
              required: false
            - name: backup_history_days
              description: Number of days to look back for backup history.
              default_value: 30
              required: false
            - name: collect_databases_matching
              description: Pattern to filter databases. Supports wildcards (*, ?) and multiple patterns separated by pipe (|).
              default_value: ""
              required: false
              detailed_description: |
                Use SQL LIKE patterns to filter which databases to monitor.
                Examples:
                - 'PROD*' - Only databases starting with PROD
                - '*TEST*|*DEV*' - Test or development databases
                - Leave empty to collect all databases
            - name: collect_bufferpools_matching
              description: Pattern to filter buffer pools. Supports wildcards (*, ?) and multiple patterns separated by pipe (|).
              default_value: ""
              required: false
              detailed_description: |
                Use SQL LIKE patterns to filter which buffer pools to monitor.
                Examples:
                - 'IBMSYSTEM*' - Only system buffer pools
                - Leave empty to collect all buffer pools
            - name: collect_tablespaces_matching
              description: Pattern to filter tablespaces. Supports wildcards (*, ?) and multiple patterns separated by pipe (|).
              default_value: ""
              required: false
              detailed_description: |
                Use SQL LIKE patterns to filter which tablespaces to monitor.
                Examples:
                - 'USER*' - Only user tablespaces
                - '*TEMP*' - Temporary tablespaces
                - Leave empty to collect all tablespaces
            - name: collect_connections_matching
              description: Pattern to filter connections by application name. Supports wildcards (*, ?) and multiple patterns separated by pipe (|).
              default_value: ""
              required: false
              detailed_description: |
                Use SQL LIKE patterns to filter which connections to monitor.
                Examples:
                - '*jdbc*' - Only JDBC connections
                - '*java*|*python*' - Java or Python applications
                - Leave empty to collect all connections
            - name: collect_tables_matching
              description: Pattern to filter tables (schema.table). Supports wildcards (*, ?) and multiple patterns separated by pipe (|).
              default_value: ""
              required: false
              detailed_description: |
                Use SQL LIKE patterns to filter which tables to monitor.
                Examples:
                - 'MYSCHEMA.*' - All tables in MYSCHEMA
                - '*.ORDERS' - ORDERS table in any schema
                - Leave empty to collect all tables
            - name: collect_indexes_matching
              description: Pattern to filter indexes (schema.index). Supports wildcards (*, ?) and multiple patterns separated by pipe (|).
              default_value: ""
              required: false
              detailed_description: |
                Use SQL LIKE patterns to filter which indexes to monitor.
                Examples:
                - 'MYSCHEMA.IDX_*' - Indexes starting with IDX_ in MYSCHEMA
                - Leave empty to collect all indexes
            - name: vnode
              description: Virtual node (vnode) assignment for Netdata Cloud.
              default_value: ""
              required: false
            - name: collect_memory_metrics
              description: Enable collection of memory pool metrics.
              default_value: true
              required: false
            - name: collect_wait_metrics
              description: Enable collection of enhanced wait metrics for connections.
              default_value: true
              required: false
            - name: collect_table_io_metrics
              description: Enable collection of table I/O statistics.
              default_value: true
              required: false
        examples:
          folding:
            title: Config examples
            enabled: true
          list:
            - name: Component-based configuration (recommended)
              description: Connect using component parameters (automatically uses ODBC).
              config: |
                jobs:
                  - name: db2_prod
                    hostname: db2.example.com
                    port: 50000
                    database: sample
                    username: db2inst1
                    password: password
            - name: ODBC DSN string format
              description: Connect using ODBC connection string.
              config: |
                jobs:
                  - name: db2_odbc
                    dsn: 'Driver={IBM DB2 ODBC DRIVER};Database=sample;Hostname=db2.example.com;Port=50000;Protocol=TCPIP;Uid=db2inst1;Pwd=password'
            - name: DB2 on Cloud with SSL
              description: Connect to IBM Db2 on Cloud using SSL.
              config: |
                jobs:
                  - name: db2_cloud
                    hostname: xxx.databases.appdomain.cloud
                    port: 32733
                    database: bludb
                    username: your_username
                    password: your_password
                    use_ssl: true
                    ssl_server_cert_path: "/path/to/DigiCertGlobalRootCA.crt"
                    timeout: 10
            - name: Limited cardinality monitoring
              description: Monitor with cardinality limits to prevent resource exhaustion.
              config: |
                jobs:
                  - name: db2_limited
                    hostname: db2.example.com
                    port: 50000
                    database: sample
                    username: db2inst1
                    password: password
                    max_databases: 5
                    max_tablespaces: 50
                    max_connections: 100
                    collect_connection_metrics: false  # Disable connection tracking
            - name: Admin configuration override
              description: Admin configuration always takes precedence over version detection.
              config: |
                jobs:
                  - name: db2_custom
                    hostname: db2custom.example.com
                    port: 50000
                    database: sample
                    username: db2inst1
                    password: password
                    # Enable features explicitly - collector will attempt them regardless of detected edition
                    collect_database_metrics: true
                    collect_bufferpool_metrics: true
                    collect_connection_metrics: true
                    # The collector will attempt these features even if version detection suggests they're unavailable
    troubleshooting:
      problems:
        list:
          - name: Connection refused
            description: Unable to connect to DB2 database via ODBC.
            recommendations:
              - Verify the database hostname/IP is correct and reachable
              - Check if the DB2 port is open (common ports: 50000, 446, 5023)
              - Verify the database name and credentials are correct
              - Ensure unixODBC and IBM DB2 ODBC drivers are installed
              - Check ODBC driver registration with `odbcinst -q -d`
              - Test connection with `isql -v "CONNECTION_STRING"`
          - name: Permission denied on SYSIBMADM views
            description: User doesn't have permission to query system views.
            recommendations:
              - Grant SELECT permission on SYSIBMADM schema views
              - Contact your DBA to set up proper monitoring permissions
          - name: SQL0204N "SYSIBMADM.ENV_INST_INFO" is an undefined name
            description: The monitoring views are not available.
            recommendations:
              - Ensure you're connecting to a DB2 database (not other database types)
              - Check if the DB2 version supports SYSIBMADM views (DB2 9.7+)
              - The collector automatically adapts to edition limitations (DB2 for i, z/OS)
              - Check logs for feature availability messages
          - name: Missing features on certain DB2 editions
            description: Some features are not available on all DB2 editions.
            recommendations:
              - DB2 for i (AS/400) has limited SYSIBMADM view support
              - DB2 for z/OS has different monitoring capabilities
              - Db2 on Cloud restricts system-level metrics (missing columns like POOL_COL_*, *_LBP_PAGES_FOUND, APPLICATION_NAME, UOW_COMP_STATUS, ROWS_MODIFIED, PAGESIZE, FREE_PAGES, TOTAL_LOG_USED/AVAILABLE)
              - The collector automatically detects edition/version and uses appropriate queries
              - Check logs for "Feature availability" and "Feature disabled" messages
              - The collector will gracefully degrade functionality based on what's available
              - Admin configuration always takes precedence over auto-detection - if you enable a feature, the collector will attempt it regardless of version
    alerts:
      - name: db2_connection_usage
        metric: db2.connections
        info: Database connection usage is high
        link: https://github.com/netdata/netdata/blob/master/src/health/health.d/db2.conf
      - name: db2_lock_timeouts
        metric: db2.locking
        info: High number of lock timeouts
        link: https://github.com/netdata/netdata/blob/master/src/health/health.d/db2.conf
      - name: db2_deadlocks
        metric: db2.deadlocks
        info: Deadlocks detected
        link: https://github.com/netdata/netdata/blob/master/src/health/health.d/db2.conf
      - name: db2_tablespace_usage
        metric: db2.tablespace_usage
        info: Tablespace ${label:tablespace} usage is high
        link: https://github.com/netdata/netdata/blob/master/src/health/health.d/db2.conf
      - name: db2_log_space_usage
        metric: db2.log_space
        info: Database log space usage is high
        link: https://github.com/netdata/netdata/blob/master/src/health/health.d/db2.conf
      - name: db2_long_running_queries
        metric: db2.long_running_queries
        info: Long-running queries detected (>5 minutes)
        link: https://github.com/netdata/netdata/blob/master/src/health/health.d/db2.conf
      - name: db2_backup_age
        metric: db2.backup_age
        info: Database backup is older than 24 hours
        link: https://github.com/netdata/netdata/blob/master/src/health/health.d/db2.conf
      - name: db2_backup_failed
        metric: db2.backup_status
        info: Last database backup failed
        link: https://github.com/netdata/netdata/blob/master/src/health/health.d/db2.conf
    metrics:
      folding:
        title: Metrics
        enabled: false
      description: ""
      availability: []
      scopes:
        - name: global
          description: These metrics refer to the entire DB2 instance.
          labels: []
          metrics:
            - name: db2.connections
              description: Database Connections
              unit: connections
              chart_type: line
              dimensions:
                - name: total
                - name: active
                - name: executing
                - name: idle
                - name: max_allowed
            - name: db2.locking
              description: Database Locking
              unit: events/s
              chart_type: line
              dimensions:
                - name: waits
                - name: timeouts
                - name: escalations
            - name: db2.deadlocks
              description: Database Deadlocks
              unit: deadlocks/s
              chart_type: line
              dimensions:
                - name: deadlocks
            - name: db2.sorting
              description: Database Sorting
              unit: sorts/s
              chart_type: stacked
              dimensions:
                - name: sorts
                - name: overflows
            - name: db2.bufferpool_hit_ratio
              description: Buffer Pool Hit Ratio
              unit: percentage
              chart_type: line
              dimensions:
                - name: hit_ratio
            - name: db2.log_space
              description: Log Space Usage
              unit: bytes
              chart_type: stacked
              dimensions:
                - name: used
                - name: available
            - name: db2.long_running_queries
              description: Long Running Queries
              unit: queries
              chart_type: stacked
              dimensions:
                - name: total
                - name: warning
                - name: critical
            - name: db2.backup_status
              description: Last Backup Status
              unit: status
              chart_type: line
              dimensions:
                - name: status
            - name: db2.backup_age
              description: Time Since Last Backup
              unit: hours
              chart_type: line
              dimensions:
                - name: full
                - name: incremental
            - name: db2.service_health
              description: Service Health Status
              unit: status
              chart_type: line
              dimensions:
                - name: connection
                - name: database
            - name: db2.lock_details
              description: Lock Details
              unit: locks
              chart_type: line
              dimensions:
                - name: active
                - name: waiting_agents
                - name: memory_pages
            - name: db2.lock_wait_time
              description: Average Lock Wait Time
              unit: milliseconds
              chart_type: line
              dimensions:
                - name: wait_time
            - name: db2.bufferpool_detailed_hit_ratio
              description: Buffer Pool Detailed Hit Ratios
              unit: percentage
              chart_type: line
              dimensions:
                - name: data
                - name: index
                - name: xda
                - name: column
            - name: db2.bufferpool_reads
              description: Buffer Pool Reads
              unit: reads/s
              chart_type: stacked
              dimensions:
                - name: logical
                - name: physical
            - name: db2.bufferpool_data_reads
              description: Buffer Pool Data Page Reads
              unit: reads/s
              chart_type: stacked
              dimensions:
                - name: logical
                - name: physical
            - name: db2.bufferpool_index_reads
              description: Buffer Pool Index Page Reads
              unit: reads/s
              chart_type: stacked
              dimensions:
                - name: logical
                - name: physical
            - name: db2.bufferpool_xda_reads
              description: Buffer Pool XDA Page Reads
              unit: reads/s
              chart_type: stacked
              dimensions:
                - name: logical
                - name: physical
            - name: db2.bufferpool_column_reads
              description: Buffer Pool Column Page Reads
              unit: reads/s
              chart_type: stacked
              dimensions:
                - name: logical
                - name: physical
            - name: db2.log_utilization
              description: Log Space Utilization
              unit: percentage
              chart_type: line
              dimensions:
                - name: utilization
            - name: db2.log_io
              description: Log I/O Operations
              unit: operations/s
              chart_type: area
              dimensions:
                - name: reads
                - name: writes
            - name: db2.row_activity
              description: Row Activity
              unit: rows/s
              chart_type: area
              dimensions:
                - name: read
                - name: returned
                - name: modified
        - name: database
          description: These metrics refer to individual databases.
          labels:
            - name: database
              description: Database name
            - name: status
              description: Database status
          metrics:
            - name: db2.database_status
              description: Database Status
              unit: status
              chart_type: line
              dimensions:
                - name: status
            - name: db2.database_applications
              description: Database Applications
              unit: applications
              chart_type: line
              dimensions:
                - name: applications
        - name: bufferpool
          description: These metrics refer to individual buffer pools.
          labels:
            - name: bufferpool
              description: Buffer pool name
            - name: page_size
              description: Page size in bytes
          metrics:
            - name: db2.bufferpool_instance_hit_ratio
              description: Buffer Pool Hit Ratio
              unit: percentage
              chart_type: line
              dimensions:
                - name: overall
            - name: db2.bufferpool_instance_detailed_hit_ratio
              description: Buffer Pool Detailed Hit Ratios
              unit: percentage
              chart_type: line
              dimensions:
                - name: data
                - name: index
                - name: xda
                - name: column
            - name: db2.bufferpool_instance_reads
              description: Buffer Pool Reads
              unit: reads/s
              chart_type: stacked
              dimensions:
                - name: logical
                - name: physical
            - name: db2.bufferpool_instance_data_reads
              description: Buffer Pool Data Page Reads
              unit: reads/s
              chart_type: stacked
              dimensions:
                - name: logical
                - name: physical
            - name: db2.bufferpool_instance_index_reads
              description: Buffer Pool Index Page Reads
              unit: reads/s
              chart_type: stacked
              dimensions:
                - name: logical
                - name: physical
            - name: db2.bufferpool_instance_pages
              description: Buffer Pool Pages
              unit: pages
              chart_type: stacked
              dimensions:
                - name: used
                - name: total
        - name: tablespace
          description: These metrics refer to individual tablespaces.
          labels:
            - name: tablespace
              description: Tablespace name
            - name: type
              description: Tablespace type (DMS/SMS)
            - name: content_type
              description: Content type (REGULAR/LARGE/TEMP)
            - name: state
              description: Tablespace state
          metrics:
            - name: db2.tablespace_usage
              description: Tablespace Usage
              unit: percentage
              chart_type: line
              dimensions:
                - name: used
            - name: db2.tablespace_size
              description: Tablespace Size
              unit: bytes
              chart_type: stacked
              dimensions:
                - name: used
                - name: free
            - name: db2.tablespace_usable_size
              description: Tablespace Usable Size
              unit: bytes
              chart_type: line
              dimensions:
                - name: total
                - name: usable
        - name: connection
          description: These metrics refer to individual database connections.
          labels:
            - name: application_id
              description: Application ID
            - name: application_name
              description: Application name
            - name: client_hostname
              description: Client hostname
            - name: client_user
              description: Client username
            - name: state
              description: Connection state
          metrics:
            - name: db2.connection_state
              description: Connection State
              unit: state
              chart_type: line
              dimensions:
                - name: state
            - name: db2.connection_activity
              description: Connection Row Activity
              unit: rows/s
              chart_type: area
              dimensions:
                - name: read
                - name: written
        - name: table
          description: These metrics refer to individual tables.
          labels:
            - name: table
              description: Table name (schema.table)
          metrics:
            - name: db2.table_size
              description: Table Size
              unit: bytes
              chart_type: stacked
              dimensions:
                - name: data
                - name: index
                - name: long_obj
            - name: db2.table_activity
              description: Table Activity
              unit: rows/s
              chart_type: area
              dimensions:
                - name: read
                - name: written
        - name: index
          description: These metrics refer to individual indexes.
          labels:
            - name: index
              description: Index name (schema.index)
          metrics:
            - name: db2.index_usage
              description: Index Usage
              unit: scans/s
              chart_type: area
              dimensions:
                - name: index
                - name: full
        - name: memory_pool
          description: These metrics refer to individual memory pools.
          labels:
            - name: pool_type
              description: Memory pool type (BP, DATABASE, LOCK_MGR, SHARED_SORT, etc.)
            - name: db2_edition
              description: DB2 edition (LUW, z/OS, i, Cloud)
            - name: db2_version
              description: DB2 version string
          metrics:
            - name: db2.memory_pool_usage
              description: Memory Pool Usage
              unit: bytes
              chart_type: line
              dimensions:
                - name: used
            - name: db2.memory_pool_hwm
              description: Memory Pool High Water Mark
              unit: bytes
              chart_type: line
              dimensions:
                - name: hwm
        - name: table_io
          description: These metrics refer to I/O statistics for individual tables.
          labels:
            - name: table
              description: Table name (schema.table)
            - name: db2_edition
              description: DB2 edition (LUW, z/OS, i, Cloud)
            - name: db2_version
              description: DB2 version string
          metrics:
            - name: db2.table_io_scans
              description: Table Scans
              unit: scans/s
              chart_type: line
              dimensions:
                - name: scans
            - name: db2.table_io_rows
              description: Table Row Operations
              unit: rows/s
              chart_type: line
              dimensions:
                - name: read
            - name: db2.table_io_activity
              description: Table DML Activity
              unit: operations/s
              chart_type: stacked
              dimensions:
                - name: inserts
                - name: updates
                - name: deletes
