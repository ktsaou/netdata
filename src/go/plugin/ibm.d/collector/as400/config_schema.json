{
  "jsonSchema": {
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "AS400 collector configuration.",
    "type": "object",
    "properties": {
      "update_every": {
        "title": "Update every",
        "description": "Data collection interval, measured in seconds.",
        "type": "integer",
        "minimum": 1,
        "default": 5
      },
      "dsn": {
        "title": "DSN",
        "description": "IBM DB2 connection string. Format: DATABASE=dbname;HOSTNAME=host;PORT=port;PROTOCOL=TCPIP;UID=username;PWD=password[;SECURITY=SSL;SSLServerCertificate=/path/to/cert]",
        "type": "string",
        "default": ""
      },
      "timeout": {
        "title": "Timeout",
        "description": "Query timeout, in seconds.",
        "type": "number",
        "minimum": 0.5,
        "default": 2
      },
      "max_db_conns": {
        "title": "Max database connections",
        "description": "Maximum number of open connections to the database.",
        "type": "integer",
        "minimum": 1,
        "default": 1
      },
      "max_db_life_time": {
        "title": "Max connection lifetime",
        "description": "Maximum amount of time a connection may be reused, in seconds.",
        "type": "number",
        "minimum": 60,
        "default": 600
      },
      "collect_disk_metrics": {
        "title": "Collect per-disk metrics",
        "description": "Enable collection of metrics for individual disks.",
        "type": "boolean",
        "default": true
      },
      "collect_subsystem_metrics": {
        "title": "Collect per-subsystem metrics",
        "description": "Enable collection of metrics for individual subsystems.",
        "type": "boolean",
        "default": true
      },
      "collect_job_queue_metrics": {
        "title": "Collect per-job-queue metrics",
        "description": "Enable collection of metrics for individual job queues.",
        "type": "boolean",
        "default": true
      },
      "collect_active_jobs": {
        "title": "Collect active jobs",
        "description": "Enable collection of metrics for top active jobs by CPU usage.",
        "type": "boolean",
        "default": false
      },
      "max_disks": {
        "title": "Maximum disks",
        "description": "Maximum number of disks to collect metrics for. Set to 0 for unlimited.",
        "type": "integer",
        "minimum": 0,
        "default": 50
      },
      "max_subsystems": {
        "title": "Maximum subsystems",
        "description": "Maximum number of subsystems to collect metrics for. Set to 0 for unlimited.",
        "type": "integer",
        "minimum": 0,
        "default": 20
      },
      "max_job_queues": {
        "title": "Maximum job queues",
        "description": "Maximum number of job queues to collect metrics for. Set to 0 for unlimited.",
        "type": "integer",
        "minimum": 0,
        "default": 50
      },
      "max_active_jobs": {
        "title": "Maximum active jobs",
        "description": "Maximum number of active jobs to collect metrics for.",
        "type": "integer",
        "minimum": 1,
        "default": 10
      },
      "collect_disks_matching": {
        "title": "Disk selector",
        "description": "Pattern to filter disks. Supports wildcards (*, ?) and multiple patterns separated by |. Examples: 'DD*' for disks starting with DD, '*SSD*|*NVMe*' for SSD or NVMe disks.",
        "type": "string",
        "default": ""
      },
      "collect_subsystems_matching": {
        "title": "Subsystem selector",
        "description": "Pattern to filter subsystems. Supports wildcards (*, ?) and multiple patterns separated by |. Examples: 'QINTER' for interactive subsystem, 'Q*' for all Q subsystems.",
        "type": "string",
        "default": ""
      },
      "collect_job_queues_matching": {
        "title": "Job queue selector",
        "description": "Pattern to filter job queues. Supports wildcards (*, ?) and multiple patterns separated by |. Examples: 'QBATCH*' for batch queues, '*PROD*|*TEST*' for prod or test queues.",
        "type": "string",
        "default": ""
      },
      "ifs_top_n_directories": {
        "title": "IFS top N directories",
        "description": "Monitor top N IFS directories by size. Set to 0 to disable.",
        "type": "integer",
        "minimum": 0,
        "default": 20
      },
      "ifs_start_path": {
        "title": "IFS start path",
        "description": "Starting path for IFS directory monitoring. Useful for monitoring specific subdirectories on large file systems.",
        "type": "string",
        "default": "/"
      },
      "ignore_version_checks": {
        "title": "Ignore version checks",
        "description": "WARNING: Disables all version compatibility checks. The collector will attempt to use all configured features regardless of IBM i version. Use with caution as this may cause errors on older systems.",
        "type": "boolean",
        "default": false
      },
      "vnode": {
        "title": "Vnode",
        "description": "Associates this data collection job with a [Virtual Node](https://learn.netdata.cloud/docs/netdata-agent/configuration/organize-systems-metrics-and-alerts#virtual-nodes).",
        "type": "string"
      }
    },
    "required": [
      "dsn"
    ],
    "additionalProperties": false,
    "patternProperties": {
      "^name$": {}
    }
  },
  "uiSchema": {
    "ui:flavour": "tabs",
    "ui:options": {
      "tabs": [
        {
          "title": "Base",
          "fields": [
            "update_every",
            "dsn",
            "timeout"
          ]
        },
        {
          "title": "Instance Collection",
          "fields": [
            "collect_disk_metrics",
            "collect_subsystem_metrics",
            "collect_job_queue_metrics",
            "collect_active_jobs"
          ]
        },
        {
          "title": "Cardinality Control",
          "fields": [
            "max_disks",
            "max_subsystems",
            "max_job_queues",
            "max_active_jobs",
            "collect_disks_matching",
            "collect_subsystems_matching",
            "collect_job_queues_matching",
            "ifs_top_n_directories",
            "ifs_start_path"
          ]
        },
        {
          "title": "Advanced",
          "fields": [
            "max_db_conns",
            "max_db_life_time",
            "ignore_version_checks"
          ]
        }
      ]
    },
    "dsn": {
      "ui:widget": "password"
    },
    "vnode": {
      "ui:placeholder": "To use this option, first create a Virtual Node and then reference its name here."
    }
  }
}