{
  "jsonSchema": {
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "AS400 collector configuration.",
    "type": "object",
    "properties": {
      "update_every": {
        "title": "Update every",
        "description": "Data collection interval, measured in seconds.",
        "type": "integer",
        "minimum": 1,
        "default": 5
      },
      "dsn": {
        "title": "DSN",
        "description": "IBM DB2 connection string. Format: DATABASE=dbname;HOSTNAME=host;PORT=port;PROTOCOL=TCPIP;UID=username;PWD=password[;SECURITY=SSL;SSLServerCertificate=/path/to/cert]",
        "type": "string",
        "default": ""
      },
      "timeout": {
        "title": "Timeout",
        "description": "Query timeout, in seconds.",
        "type": "number",
        "minimum": 0.5,
        "default": 2
      },
      "max_db_conns": {
        "title": "Max database connections",
        "description": "Maximum number of open connections to the database.",
        "type": "integer",
        "minimum": 1,
        "default": 1
      },
      "max_db_life_time": {
        "title": "Max connection lifetime",
        "description": "Maximum amount of time a connection may be reused, in seconds.",
        "type": "number",
        "minimum": 60,
        "default": 600
      },
      "collect_disk_metrics": {
        "title": "Collect per-disk metrics",
        "description": "Enable collection of metrics for individual disks.",
        "type": "boolean",
        "default": true
      },
      "collect_subsystem_metrics": {
        "title": "Collect per-subsystem metrics",
        "description": "Enable collection of metrics for individual subsystems.",
        "type": "boolean",
        "default": true
      },
      "collect_job_queue_metrics": {
        "title": "Collect per-job-queue metrics",
        "description": "Enable collection of metrics for individual job queues.",
        "type": "boolean",
        "default": true
      },
      "max_disks": {
        "title": "Maximum disks",
        "description": "Maximum number of disks to collect metrics for. Set to 0 for unlimited.",
        "type": "integer",
        "minimum": 0,
        "default": 50
      },
      "max_subsystems": {
        "title": "Maximum subsystems",
        "description": "Maximum number of subsystems to collect metrics for. Set to 0 for unlimited.",
        "type": "integer",
        "minimum": 0,
        "default": 20
      },
      "max_job_queues": {
        "title": "Maximum job queues",
        "description": "Maximum number of job queues to collect metrics for. Set to 0 for unlimited.",
        "type": "integer",
        "minimum": 0,
        "default": 50
      },
      "collect_disks_matching": {
        "title": "Disk selector",
        "description": "SQL LIKE pattern to filter disks (e.g., 'DD%' for disks starting with DD).",
        "type": "string",
        "default": ""
      },
      "collect_subsystems_matching": {
        "title": "Subsystem selector",
        "description": "SQL LIKE pattern to filter subsystems (e.g., 'QINTER' for interactive subsystem).",
        "type": "string",
        "default": ""
      },
      "collect_job_queues_matching": {
        "title": "Job queue selector",
        "description": "SQL LIKE pattern to filter job queues (e.g., 'QBATCH%').",
        "type": "string",
        "default": ""
      }
    },
    "required": [
      "dsn"
    ],
    "additionalProperties": false,
    "patternProperties": {
      "^name$": {}
    }
  },
  "uiSchema": {
    "ui:flavour": "tabs",
    "ui:options": {
      "tabs": [
        {
          "title": "Base",
          "fields": [
            "update_every",
            "dsn",
            "timeout"
          ]
        },
        {
          "title": "Instance Collection",
          "fields": [
            "collect_disk_metrics",
            "collect_subsystem_metrics",
            "collect_job_queue_metrics"
          ]
        },
        {
          "title": "Cardinality Control",
          "fields": [
            "max_disks",
            "max_subsystems",
            "max_job_queues",
            "collect_disks_matching",
            "collect_subsystems_matching",
            "collect_job_queues_matching"
          ]
        },
        {
          "title": "Advanced",
          "fields": [
            "max_db_conns",
            "max_db_life_time"
          ]
        }
      ]
    },
    "dsn": {
      "ui:widget": "password"
    }
  }
}